<!DOCTYPE html>
<html>
  <head>
    <title>Simple Map</title>
    <meta charset="utf-8">
    <style>
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
      .map {
        height: 40%;
        width: 30%;
      }

    </style>
  </head>
  <body>

    <div class="map" id="map1"></div>
    <div id="show_start">aa</div>

    <div class="map" id="map2"></div>
    <div id="show_end">bb</div>
    <form id="form" action="back.php" method="GET">
      <input type="hidden" value="" name="start" id="start" />
      <input type="hidden" value="" name="end" id="end"/>
      <input type="text" value="300" label="半径" name="radius" id="radius"/>
      <input type="submit" value="go">
    </form>

    <script>
      function initMap() {
        var station = new google.maps.LatLng(34.972937, 138.384326);
        station_json = station.toJSON();
        array = [];
        initMap1();
        initMap2();
      }


      function listener(event, marker, id) {
        var lat_lng = event.latLng;
        var str = lat_lng.toString();
        marker.setPosition(lat_lng);
        var hash = {
          'show_start': 'start',
          'show_end': 'end'
        };
        var form_id = hash[id];
        var form_value = JSON.stringify(lat_lng.toJSON());
        document.getElementById(id).innerHTML = str;
        document.getElementById(form_id).value = form_value;
      }



      function initMap1() {

        var map1 = new google.maps.Map(document.getElementById('map1'), {
          center: station_json,
          zoom: 14
        });
        var init_center = map1.getCenter();
        var markerOpts = {
          position: init_center,
          map: map1,
          title: "marker test"
        };

        var marker = new google.maps.Marker(markerOpts);

        var str = init_center.toString();
        document.getElementById("show_start").innerHTML = str;
        google.maps.event.addListener(map1, 'click', function(event) {  listener(event, marker, 'show_start');});

      }



      function initMap2() {

        var map2 = new google.maps.Map(document.getElementById('map2'), {
          center: station_json,
          zoom: 14
        });
        var init_center = map2.getCenter();
        var markerOpts = {
          position: init_center,
          map: map2,
          title: "marker test"
        };
        var marker = new google.maps.Marker(markerOpts);
        var str = init_center.toString();
        document.getElementById("show_end").innerHTML = str;
        google.maps.event.addListener(map2, 'click', function(event) {  listener(event, marker, 'show_end');});

      }

    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD_-AT7Xnv1UfvLbQK-nSVXaWtLpU2-Y9A&callback=initMap"
            async defer></script>
    <!-- <button type="button" onclick="alert()" value="ho">
         aa
         </button> -->
  </body>
</html>
